<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gmail V2L Separator</title>
<style>
body{background:#000;color:#fff;font-family:Arial,sans-serif;margin:0;padding:0;display:flex;flex-direction:column;align-items:center;}
header{padding:20px;text-align:center;}
h1{margin:0;font-size:24px;}
.controls{background:#111;padding:20px;border-radius:10px;display:flex;flex-direction:column;gap:10px;width:90%;max-width:700px;}
textarea{width:100%;min-height:100px;background:#222;color:#fff;border:none;padding:10px;border-radius:6px;}
.btn{padding:10px 14px;background:#1e90ff;color:#fff;border:none;border-radius:6px;cursor:pointer;}
.filters{display:flex;gap:10px;align-items:center;margin-top:10px;}
table{width:100%;margin-top:20px;border-collapse:collapse;}
th,td{padding:8px;border-bottom:1px solid #333;text-align:left;}
th{color:#bbb;}
</style>
</head>
<body>
<header><h1>Gmail V2L Separator</h1></header>
<section class="controls">
  <textarea id="inputArea" placeholder="Paste your accounts here..."></textarea>
  <div style="display:flex;gap:10px;flex-wrap:wrap;">
    <button class="btn" id="parseBtn">Parse</button>
    <button class="btn" id="downloadYes">Download V2L_Yes.txt</button>
    <button class="btn" id="downloadNo">Download V2L_No.txt</button>
  </div>
  <div class="filters">
    <label><input type="radio" name="v2lFilter" value="all" checked> All</label>
    <label><input type="radio" name="v2lFilter" value="yes"> V2L: Yes</label>
    <label><input type="radio" name="v2lFilter" value="no"> V2L: No</label>
    <div style="margin-left:auto;">Found: <span id="count">0</span></div>
  </div>
</section>
<main style="width:90%;max-width:700px;">
  <table>
    <thead>
      <tr><th>Email</th><th>Password</th><th>V2L</th></tr>
    </thead>
    <tbody id="resultBody"></tbody>
  </table>
</main>
<script>
let parsedAccounts = [];

function parseAccounts(text){
  parsedAccounts = [];
  const blocks = text.split(/-{3,}/).map(b=>b.trim()).filter(b=>b);
  blocks.forEach(block=>{
    const v2lMatch = block.match(/V2L\s*:\s*(Yes|No)/i);
    if(!v2lMatch) return; // skip if no V2L line
    const v2l = v2lMatch[1].toLowerCase() === 'yes' ? 'Yes' : 'No';
    const gmailMatch = block.match(/([a-zA-Z0-9._%+-]+@gmail\.com)\s*[:]\s*([^\s]+)/);
    if(!gmailMatch) return; // skip non-gmail
    parsedAccounts.push({
      email: gmailMatch[1],
      password: gmailMatch[2],
      v2l: v2l
    });
  });
}

function renderTable(filter='all'){
  const tbody = document.getElementById('resultBody');
  tbody.innerHTML = '';
  let count=0;
  parsedAccounts.forEach(acc=>{
    if(filter==='yes' && acc.v2l!=='Yes') return;
    if(filter==='no' && acc.v2l!=='No') return;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${acc.email}</td><td>${acc.password}</td><td>${acc.v2l}</td>`;
    tbody.appendChild(tr);
    count++;
  });
  document.getElementById('count').textContent = count;
}

document.getElementById('parseBtn').addEventListener('click', ()=>{
  parseAccounts(document.getElementById('inputArea').value);
  const filter = document.querySelector('input[name="v2lFilter"]:checked').value;
  renderTable(filter);
});

document.querySelectorAll('input[name="v2lFilter"]').forEach(radio=>{
  radio.addEventListener('change', ()=>{
    const filter = document.querySelector('input[name="v2lFilter"]:checked').value;
    renderTable(filter);
  });
});

function downloadList(list, filename){
  const blob = new Blob([list.join('\n')],{type:'text/plain;charset=utf-8'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = filename;
  a.click();
}

document.getElementById('downloadYes').addEventListener('click', ()=>{
  const list = parsedAccounts.filter(a=>a.v2l==='Yes').map(a=>`${a.email}:${a.password}`);
  if(list.length===0){ alert('No V2L: Yes accounts'); return;}
  downloadList(list,'V2L_Yes.txt');
});

document.getElementById('downloadNo').addEventListener('click', ()=>{
  const list = parsedAccounts.filter(a=>a.v2l==='No').map(a=>`${a.email}:${a.password}`);
  if(list.length===0){ alert('No V2L: No accounts'); return;}
  downloadList(list,'V2L_No.txt');
});
</script>
</body>
</html>